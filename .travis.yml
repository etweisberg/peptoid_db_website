language: python
python:
    - "3.8"

services:
    - docker

install:
    - pip install -r databank/requirements.txt
    - echo L1VzZXJzL2V3ZWlzYmVyZzEwL0NvZGUvZGlnaXRhbC1vY2Vhbi1rZXkucHViCg== | base64 -d >> $HOME/.ssh/known_hosts
script: pytest -q databank/tests.py

deploy:
  # Build Docker container and push to Docker Hub
  provider: script
  script: bash deploy.sh
  on:
    branch: master
